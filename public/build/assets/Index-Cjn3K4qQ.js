import{c as J,j as t,L as E,H as O}from"./app-B8a5mCKR.js";import{m as M,A as P,T as U}from"./app-layout-mZ7hR956.js";import{B as Q}from"./badge-CkdsnO1T.js";import{c as W,C as X,a as Y,b as Z,d as ee}from"./card-C5ye0D05.js";import{T as I,a as L,b as te,c as H,d as se,e as le}from"./table-BONrsK95.js";import{c as G}from"./app-logo-icon-Ch3PaEPk.js";/* empty css            */import"./index-Daswyek_.js";import"./index-CXVd6U4Y.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],z=G("ChevronLeft",ae);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],re=G("CircleCheckBig",ne),a=s=>s.replace(/&laquo;/g,"«").replace(/&raquo;/g,"»").replace(/&nbsp;/g," "),ie=s=>s?new Date(s).toLocaleString("vi-VN"):"—";function ve(s){const e=J.c(59),{logs:n}=s;let q;e[0]!==n?(q=Array.isArray(n?.data)?n.data:[],e[0]=n,e[1]=q):q=e[1];const l=q;let o,h,x,p,r,i,u,f,j,g,b,c,d,m;if(e[2]!==l||e[3]!==n){const $=Array.isArray(n?.links)?n.links:[],D=n?.meta,k=$.find(he),A=$.find(oe),F=$.filter(me);x=P,e[18]===Symbol.for("react.memo_cache_sentinel")?(i=t.jsx(O,{title:"Quản lý vi phạm"}),e[18]=i):i=e[18],p="flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4",e[19]===Symbol.for("react.memo_cache_sentinel")?(r=t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold",children:"Quản lý vi phạm"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Nhật ký tất cả lượt quẹt thẻ, bao gồm cả vi phạm và không vi phạm."})]}),e[19]=r):r=e[19],h=W,e[20]===Symbol.for("react.memo_cache_sentinel")?(m=t.jsxs(X,{children:[t.jsx(Y,{children:"Nhật ký quẹt thẻ"}),t.jsx(Z,{children:"Danh sách tất cả lượt quẹt thẻ được ghi nhận, bao gồm cả vi phạm (học sinh dưới 16 tuổi có biển số) và không vi phạm."})]}),e[20]=m):m=e[20],o=ee;let B;e[21]===Symbol.for("react.memo_cache_sentinel")?(B=t.jsx(te,{children:t.jsxs(I,{children:[t.jsx(H,{children:"Thời gian"}),t.jsx(H,{children:"Học sinh"}),t.jsx(H,{children:"Kết quả"}),t.jsx(H,{children:"Biển số"}),t.jsx(H,{children:"Ghi chú"})]})}),e[21]=B):B=e[21];let w;e[22]!==l?(w=l.map(de),e[22]=l,e[23]=w):w=e[23];let C;e[24]!==l.length?(C=l.length===0&&t.jsx(I,{children:t.jsx(L,{colSpan:5,className:"py-10 text-center text-sm text-muted-foreground",children:"Chưa có dữ liệu quẹt thẻ nào được ghi nhận."})}),e[24]=l.length,e[25]=C):C=e[25],e[26]!==w||e[27]!==C?(d=t.jsxs(se,{children:[B,t.jsxs(le,{children:[w,C]})]}),e[26]=w,e[27]=C,e[28]=d):d=e[28],b="mt-4 flex flex-wrap items-center justify-between gap-2 text-sm text-muted-foreground";const R=D?.current_page??1,K=D?.last_page??1,V=D?.total??l.length;e[29]!==l.length||e[30]!==R||e[31]!==K||e[32]!==V?(c=t.jsxs("div",{children:["Hiển thị ",l.length," bản ghi • Trang ",R," / ",K," • Tổng ",V]}),e[29]=l.length,e[30]=R,e[31]=K,e[32]=V,e[33]=c):c=e[33],u="flex items-center gap-2",f=k?.url?t.jsxs(E,{href:k.url,className:"inline-flex items-center gap-1 rounded-md px-3 py-1 hover:bg-muted",children:[t.jsx(z,{className:"h-4 w-4"})," ",a(k.label).replace("«","").trim()]}):t.jsxs("span",{className:"inline-flex items-center gap-1 rounded-md px-3 py-1 opacity-50",children:[t.jsx(z,{className:"h-4 w-4"})," ",k?a(k.label).replace("«","").trim():"Trước"]}),j=F.map(ce),g=A?.url?t.jsxs(E,{href:A.url,className:"inline-flex items-center gap-1 rounded-md px-3 py-1 hover:bg-muted",children:[a(A.label).replace("»","").trim()," ",t.jsx(M,{className:"h-4 w-4"})]}):t.jsxs("span",{className:"inline-flex items-center gap-1 rounded-md px-3 py-1 opacity-50",children:[A?a(A.label).replace("»","").trim():"Sau"," ",t.jsx(M,{className:"h-4 w-4"})]}),e[2]=l,e[3]=n,e[4]=o,e[5]=h,e[6]=x,e[7]=p,e[8]=r,e[9]=i,e[10]=u,e[11]=f,e[12]=j,e[13]=g,e[14]=b,e[15]=c,e[16]=d,e[17]=m}else o=e[4],h=e[5],x=e[6],p=e[7],r=e[8],i=e[9],u=e[10],f=e[11],j=e[12],g=e[13],b=e[14],c=e[15],d=e[16],m=e[17];let y;e[34]!==u||e[35]!==f||e[36]!==j||e[37]!==g?(y=t.jsxs("div",{className:u,children:[f,j,g]}),e[34]=u,e[35]=f,e[36]=j,e[37]=g,e[38]=y):y=e[38];let N;e[39]!==y||e[40]!==b||e[41]!==c?(N=t.jsxs("div",{className:b,children:[c,y]}),e[39]=y,e[40]=b,e[41]=c,e[42]=N):N=e[42];let v;e[43]!==o||e[44]!==N||e[45]!==d?(v=t.jsxs(o,{children:[d,N]}),e[43]=o,e[44]=N,e[45]=d,e[46]=v):v=e[46];let _;e[47]!==h||e[48]!==v||e[49]!==m?(_=t.jsxs(h,{children:[m,v]}),e[47]=h,e[48]=v,e[49]=m,e[50]=_):_=e[50];let T;e[51]!==p||e[52]!==r||e[53]!==_?(T=t.jsxs("div",{className:p,children:[r,_]}),e[51]=p,e[52]=r,e[53]=_,e[54]=T):T=e[54];let S;return e[55]!==x||e[56]!==i||e[57]!==T?(S=t.jsxs(x,{children:[i,T]}),e[55]=x,e[56]=i,e[57]=T,e[58]=S):S=e[58],S}function ce(s,e){return t.jsx("span",{children:s.url?t.jsx(E,{href:s.url,className:`rounded-md px-3 py-1 transition-colors ${s.active?"bg-primary text-primary-foreground shadow":"hover:bg-muted"}`,children:a(s.label)}):t.jsx("span",{className:"rounded-md px-3 py-1 opacity-50",children:a(s.label)})},`${s.label}-${e}`)}function de(s){return t.jsxs(I,{children:[t.jsx(L,{className:"whitespace-nowrap",children:ie(s.occurred_at)}),t.jsx(L,{children:s.student?t.jsxs("div",{className:"space-y-1",children:[t.jsx("div",{className:"font-medium",children:s.student.full_name}),t.jsxs("div",{className:"text-xs text-muted-foreground",children:["Mã: ",s.student.student_code," • Lớp: ",s.student.class_name,typeof s.student.age=="number"?` • Tuổi: ${s.student.age}`:""]})]}):t.jsx("span",{className:"text-muted-foreground",children:"Không rõ"})}),t.jsx(L,{children:s.result==="violation"?t.jsxs(Q,{variant:"destructive",className:"flex items-center gap-1",children:[t.jsx(U,{className:"h-3 w-3"})," Vi phạm"]}):t.jsxs(Q,{variant:"secondary",className:"flex items-center gap-1",children:[t.jsx(re,{className:"h-3 w-3"})," Hợp lệ"]})}),t.jsx(L,{children:s.has_license_plate?s.license_plate_number??"—":"Không biển số"}),t.jsx(L,{className:"max-w-[320px] text-sm text-muted-foreground",children:s.violation_reason??s.metadata?.note??"—"})]},s.id)}function me(s){return!a(s.label).includes("«")&&!a(s.label).includes("»")}function oe(s){return a(s.label).includes("»")}function he(s){return a(s.label).includes("«")}export{ve as default};
