import{c as he,a as ue,j as s,H as ge,r as me}from"./app-BBylKGur.js";import{A as pe}from"./app-layout-CXZuh_MN.js";import{c as ce,B as ae}from"./app-logo-icon-BwHC40vT.js";import{b as d,C as h,a as m,d as o,c as x}from"./card-CYO4tml0.js";import{B as oe}from"./badge-BeWK984R.js";import{T as xe,C as fe}from"./triangle-alert-DjAxZog_.js";/* empty css            */import"./index-B4eBERlR.js";import"./index-XTcFbv2T.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],be=ce("ArrowRight",je);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ne=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],_e=ce("ChartPie",Ne);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]],de=ce("UserCheck",ye);function ve(t){const e=he.c(9),{className:l}=t,r=ue.useId();let f;e[0]===Symbol.for("react.memo_cache_sentinel")?(f=s.jsx("path",{d:"M-3 13 15-5M-5 5l18-18M-1 21 17 3"}),e[0]=f):f=e[0];let c;e[1]!==r?(c=s.jsx("defs",{children:s.jsx("pattern",{id:r,x:"0",y:"0",width:"10",height:"10",patternUnits:"userSpaceOnUse",children:f})}),e[1]=r,e[2]=c):c=e[2];const a=`url(#${r})`;let n;e[3]!==a?(n=s.jsx("rect",{stroke:"none",fill:a,width:"100%",height:"100%"}),e[3]=a,e[4]=n):n=e[4];let i;return e[5]!==l||e[6]!==c||e[7]!==n?(i=s.jsxs("svg",{className:l,fill:"none",children:[c,n]}),e[5]=l,e[6]=c,e[7]=n,e[8]=i):i=e[8],i}const we=[{title:"Dashboard",href:route("dashboard")}];function ze(t){const e=he.c(73),{stats:l,recentViolations:r}=t,f=Me,c=Te,a=Ce;let n;e[0]===Symbol.for("react.memo_cache_sentinel")?(n=s.jsx(ge,{title:"Giám sát vi phạm"}),e[0]=n):n=e[0];let i;e[1]===Symbol.for("react.memo_cache_sentinel")?(i=s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Giám sát vi phạm"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Theo dõi lượt quẹt thẻ, hình ảnh xe và cảnh báo học sinh vi phạm."})]}),e[1]=i):i=e[1];let R;e[2]===Symbol.for("react.memo_cache_sentinel")?(R=s.jsxs("div",{className:"flex flex-col gap-2 md:flex-row md:items-center md:justify-between",children:[i,s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsxs(ae,{onClick:f,className:"gap-2",children:["Xem danh sách vi phạm",s.jsx(be,{className:"w-4 h-4"})]}),s.jsx(ae,{variant:"outline",onClick:Se,children:"Thêm học sinh mới"})]})]}),e[2]=R):R=e[2];let q;e[3]===Symbol.for("react.memo_cache_sentinel")?(q=s.jsx(d,{children:"Tổng học sinh theo dõi"}),e[3]=q):q=e[3];const le=l?.total_students??0;let u;e[4]!==le?(u=a(le),e[4]=le,e[5]=u):u=e[5];let g;e[6]!==u?(g=s.jsxs(h,{children:[q,s.jsx(m,{className:"text-3xl",children:u})]}),e[6]=u,e[7]=g):g=e[7];let z;e[8]===Symbol.for("react.memo_cache_sentinel")?(z=s.jsx(o,{className:"text-sm text-muted-foreground",children:"Số hồ sơ học sinh đang được hệ thống quản lý."}),e[8]=z):z=e[8];let p;e[9]!==g?(p=s.jsxs(x,{children:[g,z]}),e[9]=g,e[10]=p):p=e[10];let B;e[11]===Symbol.for("react.memo_cache_sentinel")?(B=s.jsx(d,{children:"Thẻ đang hoạt động"}),e[11]=B):B=e[11];const re=l?.active_cards??0;let j;e[12]!==re?(j=a(re),e[12]=re,e[13]=j):j=e[13];let b;e[14]!==j?(b=s.jsxs(h,{children:[B,s.jsx(m,{className:"text-3xl",children:j})]}),e[14]=j,e[15]=b):b=e[15];let F;e[16]===Symbol.for("react.memo_cache_sentinel")?(F=s.jsx(o,{className:"text-sm text-muted-foreground",children:"Thẻ RFID/QR hợp lệ để vào nhà gửi xe."}),e[16]=F):F=e[16];let N;e[17]!==b?(N=s.jsxs(x,{children:[b,F]}),e[17]=b,e[18]=N):N=e[18];let L;e[19]===Symbol.for("react.memo_cache_sentinel")?(L=s.jsx(d,{children:"Vi phạm trong 7 ngày"}),e[19]=L):L=e[19];const ne=l?.weekly_violations??0;let _;e[20]!==ne?(_=a(ne),e[20]=ne,e[21]=_):_=e[21];let y;e[22]!==_?(y=s.jsxs(h,{children:[L,s.jsx(m,{className:"text-3xl text-destructive",children:_})]}),e[22]=_,e[23]=y):y=e[23];let E;e[24]===Symbol.for("react.memo_cache_sentinel")?(E=s.jsx(o,{className:"text-sm text-muted-foreground",children:"Tổng lượt phát hiện vi phạm gần nhất."}),e[24]=E):E=e[24];let v;e[25]!==y?(v=s.jsxs(x,{children:[y,E]}),e[25]=y,e[26]=v):v=e[26];let U;e[27]===Symbol.for("react.memo_cache_sentinel")?(U=s.jsx(d,{children:"Thời gian xử lý trung bình"}),e[27]=U):U=e[27];let w;e[28]!==l?(w=l?.average_processing_time?`${l.average_processing_time.toFixed(1)}s`:"—",e[28]=l,e[29]=w):w=e[29];let k;e[30]!==w?(k=s.jsxs(h,{children:[U,s.jsx(m,{className:"text-3xl",children:w})]}),e[30]=w,e[31]=k):k=e[31];let K;e[32]===Symbol.for("react.memo_cache_sentinel")?(K=s.jsx(o,{className:"text-sm text-muted-foreground",children:"Từ lúc quẹt thẻ đến khi có kết luận."}),e[32]=K):K=e[32];let S;e[33]!==k?(S=s.jsxs(x,{children:[k,K]}),e[33]=k,e[34]=S):S=e[34];let C;e[35]!==N||e[36]!==v||e[37]!==S||e[38]!==p?(C=s.jsxs("div",{className:"grid gap-4 md:grid-cols-2 xl:grid-cols-4",children:[p,N,v,S]}),e[35]=N,e[36]=v,e[37]=S,e[38]=p,e[39]=C):C=e[39];let G;e[40]===Symbol.for("react.memo_cache_sentinel")?(G=s.jsxs("div",{children:[s.jsx(m,{children:"Lượt vi phạm gần đây"}),s.jsx(d,{children:"Tổng hợp 10 lượt mới nhất kèm hình ảnh ghi nhận từ camera."})]}),e[40]=G):G=e[40];let X;e[41]===Symbol.for("react.memo_cache_sentinel")?(X=s.jsx(xe,{className:"w-4 h-4"}),e[41]=X):X=e[41];let T;e[42]!==r.length?(T=a(r.length),e[42]=r.length,e[43]=T):T=e[43];let M;e[44]!==T?(M=s.jsxs(h,{className:"flex flex-row items-center justify-between gap-4",children:[G,s.jsxs(oe,{variant:"secondary",className:"gap-1",children:[X,T," lượt"]})]}),e[44]=T,e[45]=M):M=e[45];let H;e[46]!==r?(H=r.length===0?s.jsxs("div",{className:"relative overflow-hidden rounded-xl border border-dashed border-sidebar-border/70 p-8 text-center",children:[s.jsx(ve,{className:"absolute inset-0 size-full stroke-neutral-900/20 dark:stroke-neutral-100/20"}),s.jsxs("div",{className:"relative z-10 flex flex-col items-center gap-2",children:[s.jsx(de,{className:"w-10 h-10 text-muted-foreground"}),s.jsx("p",{className:"font-medium",children:"Chưa ghi nhận vi phạm nào"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Hệ thống sẽ hiển thị các lượt vi phạm mới nhất tại đây."})]})]}):r.map(ke),e[46]=r,e[47]=H):H=e[47];let A;e[48]!==H?(A=s.jsx(o,{className:"space-y-4",children:H}),e[48]=H,e[49]=A):A=e[49];let D;e[50]!==M||e[51]!==A?(D=s.jsxs(x,{className:"lg:col-span-2",children:[M,A]}),e[50]=M,e[51]=A,e[52]=D):D=e[52];let O;e[53]===Symbol.for("react.memo_cache_sentinel")?(O=s.jsxs(h,{children:[s.jsx(m,{children:"Đề xuất hành động"}),s.jsx(d,{children:"Hỗ trợ xử lý nhanh các tình huống vi phạm."})]}),e[53]=O):O=e[53];let Q;e[54]===Symbol.for("react.memo_cache_sentinel")?(Q=s.jsxs("div",{className:"rounded-lg border border-border/60 bg-muted/30 p-3",children:[s.jsx("p",{className:"font-medium",children:"Phân loại lại thẻ học sinh"}),s.jsx("p",{className:"text-muted-foreground",children:"Kiểm tra học sinh vi phạm liên tiếp và cập nhật thông tin người giám hộ."})]}),e[54]=Q):Q=e[54];let J;e[55]===Symbol.for("react.memo_cache_sentinel")?(J=s.jsxs("div",{className:"rounded-lg border border-border/60 bg-muted/30 p-3",children:[s.jsx("p",{className:"font-medium",children:"Xuất báo cáo PDF"}),s.jsx("p",{className:"text-muted-foreground",children:"Tổng hợp danh sách vi phạm theo lớp, gửi giáo viên chủ nhiệm mỗi tuần."})]}),e[55]=J):J=e[55];let W;e[56]===Symbol.for("react.memo_cache_sentinel")?(W=s.jsxs(x,{children:[O,s.jsxs(o,{className:"space-y-3 text-sm",children:[Q,J,s.jsxs("div",{className:"rounded-lg border border-border/60 bg-muted/30 p-3",children:[s.jsx("p",{className:"font-medium",children:"Cài đặt cảnh báo"}),s.jsx("p",{className:"text-muted-foreground",children:"Kích hoạt gửi SMS/Email cho phụ huynh khi học sinh tái phạm nhiều lần."})]})]})]}),e[56]=W):W=e[56];let Y;e[57]===Symbol.for("react.memo_cache_sentinel")?(Y=s.jsx(m,{children:"Trạng thái hệ thống"}),e[57]=Y):Y=e[57];const ie=l?.last_sync_at??null;let V;e[58]!==ie?(V=c(ie),e[58]=ie,e[59]=V):V=e[59];let P;e[60]!==V?(P=s.jsxs(h,{children:[Y,s.jsxs(d,{children:["Cập nhật lần cuối: ",V]})]}),e[60]=V,e[61]=P):P=e[61];let Z;e[62]===Symbol.for("react.memo_cache_sentinel")?(Z=s.jsxs("div",{className:"flex items-center gap-3 rounded-lg border border-border/60 bg-muted/30 p-3",children:[s.jsx(_e,{className:"h-5 w-5 text-primary"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Mô hình AI"}),s.jsx("p",{className:"text-muted-foreground",children:"Độ chính xác mục tiêu ≥ 90% trong điều kiện chuẩn."})]})]}),e[62]=Z):Z=e[62];let ee;e[63]===Symbol.for("react.memo_cache_sentinel")?(ee=s.jsxs("div",{className:"flex items-center gap-3 rounded-lg border border-border/60 bg-muted/30 p-3",children:[s.jsx(fe,{className:"h-5 w-5 text-primary"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Camera nhà gửi xe"}),s.jsx("p",{className:"text-muted-foreground",children:"Hỗ trợ ghi hình Full HD, bù sáng tự động."})]})]}),e[63]=ee):ee=e[63];let se;e[64]===Symbol.for("react.memo_cache_sentinel")?(se=s.jsxs(o,{className:"space-y-3 text-sm",children:[Z,ee,s.jsxs("div",{className:"flex items-center gap-3 rounded-lg border border-border/60 bg-muted/30 p-3",children:[s.jsx(de,{className:"h-5 w-5 text-primary"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Đầu đọc thẻ"}),s.jsx("p",{className:"text-muted-foreground",children:"Hoạt động ổn định, kiểm thử tính tuổi 0% sai lệch."})]})]})]}),e[64]=se):se=e[64];let $;e[65]!==P?($=s.jsxs("div",{className:"grid gap-4",children:[W,s.jsxs(x,{children:[P,se]})]}),e[65]=P,e[66]=$):$=e[66];let I;e[67]!==D||e[68]!==$?(I=s.jsxs("div",{className:"grid gap-4 lg:grid-cols-3",children:[D,$]}),e[67]=D,e[68]=$,e[69]=I):I=e[69];let te;return e[70]!==C||e[71]!==I?(te=s.jsxs(pe,{breadcrumbs:we,children:[n,s.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4",children:[R,C,I]})]}),e[70]=C,e[71]=I,e[72]=te):te=e[72],te}function ke(t){return s.jsxs("div",{className:"flex flex-col gap-4 rounded-xl border border-border/60 bg-background p-4 shadow-sm transition hover:border-primary/60 hover:shadow-md md:flex-row",children:[s.jsx("div",{className:"relative w-full overflow-hidden rounded-lg border bg-muted/40 md:w-48",children:t.image_url?s.jsx("img",{src:t.image_url,alt:`Ảnh vi phạm của ${t.full_name}`,className:"h-full w-full object-cover"}):s.jsx("div",{className:"flex h-full min-h-[160px] items-center justify-center text-muted-foreground",children:s.jsx(fe,{className:"h-10 w-10"})})}),s.jsxs("div",{className:"flex flex-1 flex-col gap-3",children:[s.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-2",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-semibold",children:[t.full_name,s.jsxs("span",{className:"ml-2 text-sm font-normal text-muted-foreground",children:["(",t.class_name,")"]})]}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Mã học sinh: ",t.student_code]})]}),s.jsxs(oe,{variant:"destructive",className:"gap-1",children:[s.jsx(xe,{className:"h-4 w-4"}),"Vi phạm"]})]}),s.jsxs("div",{className:"grid gap-1 text-sm text-muted-foreground md:grid-cols-2",children:[s.jsxs("span",{children:["Thời gian: ",new Date(t.occurred_at).toLocaleString("vi-VN")]}),s.jsx("span",{children:t.has_license_plate?s.jsxs("span",{children:["Biển số: ",t.license_plate_number??"Không xác định"]}):"Phương tiện không có biển số"})]}),t.violation_reason&&s.jsx("p",{className:"rounded-lg bg-destructive/10 p-3 text-sm text-destructive",children:t.violation_reason}),s.jsxs("div",{className:"flex flex-wrap gap-2 text-xs text-muted-foreground",children:[s.jsxs("span",{children:["Tuổi: ",t.age??"—"]}),s.jsxs("span",{children:["Mức độ nguy cơ: ",t.has_license_plate?"Cao":"Trung bình"]})]})]})]},t.id)}function Se(){return me.visit(route("students.create"))}function Ce(t){return t===null||Number.isNaN(t)?"—":new Intl.NumberFormat("vi-VN").format(t)}function Te(t){return t?new Date(t).toLocaleString("vi-VN",{hour:"2-digit",minute:"2-digit",day:"2-digit",month:"2-digit",year:"numeric"}):"Chưa có dữ liệu"}function Me(){me.visit(route("students.index"))}export{ze as default};
