import{c as Ae,j as t,H as Le}from"./app-CbovuGdz.js";import{A as He,j as qe,T as $e}from"./app-layout-DLyawGMA.js";import{C as j,a as u,c as p,d as g,b as _e}from"./card-tdJtM2G8.js";import{T as te,a as x,b as ve,c as ee,d as Ne,e as Te}from"./table-FGZp3Gwq.js";import{B as Oe}from"./badge-BJsqyqfd.js";import{c as Se}from"./app-logo-icon-DQRxL3Ho.js";/* empty css            */import"./index-CK41h_jI.js";import"./index-DegaWPiy.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Re=[["path",{d:"M15.6 2.7a10 10 0 1 0 5.7 5.7",key:"1e0p6d"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M13.4 10.6 19 5",key:"1kr7tw"}]],De=Se("CircleGauge",Re);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ee=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],Fe=Se("Timer",Ee),Ge={A:"Nhóm A • ≥16 tuổi • Có biển số",B:"Nhóm B • <16 tuổi • Có biển số",C:"Nhóm C • <16 tuổi • Không biển số"},ye=i=>typeof i=="number"?`${i.toFixed(1)}%`:"—",Ke=i=>typeof i=="number"?`${i.toFixed(2)} giây`:"—";function et(i){const e=Ae.c(125),{stats:l,metrics:s,violationsByGroup:c,dailyViolations:ge}=i;let le;e[0]!==c?(le=Object.values(c??{}).reduce(Ie,0),e[0]=c,e[1]=le):le=e[1];const n=le;let _,y,b,v,N,f,r,T,a,o,S,d,C,m,h;if(e[2]!==ge||e[3]!==s.accuracy||e[4]!==s.average_processing_time||e[5]!==s.precision||e[6]!==s.recall||e[7]!==n||e[8]!==c){f=Object.entries(ge??{}).sort(Ve),N=He,e[24]===Symbol.for("react.memo_cache_sentinel")?(r=t.jsx(Le,{title:"Thống kê"}),e[24]=r):r=e[24],C="flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4",e[25]===Symbol.for("react.memo_cache_sentinel")?(m=t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold",children:"Thống kê kịch bản kiểm thử"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Kết quả tổng hợp từ kịch bản 100 học sinh (40 hợp lệ nhóm A, 30 hợp lệ nhóm C, 30 nhóm B có biển số)."})]}),e[25]=m):m=e[25];let oe;e[26]===Symbol.for("react.memo_cache_sentinel")?(oe=t.jsxs(j,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(u,{className:"text-sm font-medium",children:"Độ chính xác"}),t.jsx(qe,{className:"h-4 w-4 text-muted-foreground"})]}),e[26]=oe):oe=e[26];let E;e[27]!==s.accuracy?(E=ye(s.accuracy),e[27]=s.accuracy,e[28]=E):E=e[28];let F;e[29]!==E?(F=t.jsx("div",{className:"text-2xl font-bold",children:E}),e[29]=E,e[30]=F):F=e[30];let G;e[31]!==n?(G=t.jsxs("p",{className:"text-xs text-muted-foreground",children:["Tổng ",n," lượt • 2 lượt bỏ sót"]}),e[31]=n,e[32]=G):G=e[32];let K;e[33]!==F||e[34]!==G?(K=t.jsxs(p,{children:[oe,t.jsxs(g,{children:[F,G]})]}),e[33]=F,e[34]=G,e[35]=K):K=e[35];let de;e[36]===Symbol.for("react.memo_cache_sentinel")?(de=t.jsxs(j,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(u,{className:"text-sm font-medium",children:"Recall"}),t.jsx($e,{className:"h-4 w-4 text-muted-foreground"})]}),e[36]=de):de=e[36];let P;e[37]!==s.recall?(P=ye(s.recall),e[37]=s.recall,e[38]=P):P=e[38];let V;e[39]!==P?(V=t.jsx("div",{className:"text-2xl font-bold",children:P}),e[39]=P,e[40]=V):V=e[40];let me;e[41]===Symbol.for("react.memo_cache_sentinel")?(me=t.jsx("p",{className:"text-xs text-muted-foreground",children:"28 / 30 vi phạm phát hiện đúng"}),e[41]=me):me=e[41];let I;e[42]!==V?(I=t.jsxs(p,{children:[de,t.jsxs(g,{children:[V,me]})]}),e[42]=V,e[43]=I):I=e[43];let he;e[44]===Symbol.for("react.memo_cache_sentinel")?(he=t.jsxs(j,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(u,{className:"text-sm font-medium",children:"Precision"}),t.jsx(De,{className:"h-4 w-4 text-muted-foreground"})]}),e[44]=he):he=e[44];let M;e[45]!==s.precision?(M=ye(s.precision),e[45]=s.precision,e[46]=M):M=e[46];let z;e[47]!==M?(z=t.jsx("div",{className:"text-2xl font-bold",children:M}),e[47]=M,e[48]=z):z=e[48];let xe;e[49]===Symbol.for("react.memo_cache_sentinel")?(xe=t.jsx("p",{className:"text-xs text-muted-foreground",children:"Không có cảnh báo sai (false positive)"}),e[49]=xe):xe=e[49];let J;e[50]!==z?(J=t.jsxs(p,{children:[he,t.jsxs(g,{children:[z,xe]})]}),e[50]=z,e[51]=J):J=e[51];let fe;e[52]===Symbol.for("react.memo_cache_sentinel")?(fe=t.jsxs(j,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(u,{className:"text-sm font-medium",children:"Thời gian xử lý TB"}),t.jsx(Fe,{className:"h-4 w-4 text-muted-foreground"})]}),e[52]=fe):fe=e[52];let Q;e[53]!==s.average_processing_time?(Q=Ke(s.average_processing_time),e[53]=s.average_processing_time,e[54]=Q):Q=e[54];let U;e[55]!==Q?(U=t.jsx("div",{className:"text-2xl font-bold",children:Q}),e[55]=Q,e[56]=U):U=e[56];let je;e[57]===Symbol.for("react.memo_cache_sentinel")?(je=t.jsx("p",{className:"text-xs text-muted-foreground",children:"Tính trên metadata của AccessLog"}),e[57]=je):je=e[57];let W;e[58]!==U?(W=t.jsxs(p,{children:[fe,t.jsxs(g,{children:[U,je]})]}),e[58]=U,e[59]=W):W=e[59],e[60]!==K||e[61]!==I||e[62]!==J||e[63]!==W?(h=t.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[K,I,J,W]}),e[60]=K,e[61]=I,e[62]=J,e[63]=W,e[64]=h):h=e[64],S="grid gap-4 lg:grid-cols-2";let ue;e[65]===Symbol.for("react.memo_cache_sentinel")?(ue=t.jsxs(j,{children:[t.jsx(u,{children:"Phân bố theo nhóm"}),t.jsx(_e,{children:"Số lượt kiểm tra theo phân nhóm kịch bản."})]}),e[65]=ue):ue=e[65];let pe;e[66]===Symbol.for("react.memo_cache_sentinel")?(pe=t.jsx(ve,{children:t.jsxs(te,{children:[t.jsx(ee,{children:"Nhóm"}),t.jsx(ee,{children:"Số lượt"}),t.jsx(ee,{children:"Tỉ lệ"})]})}),e[66]=pe):pe=e[66];let X;e[67]!==c?(X=Object.entries(c??{}),e[67]=c,e[68]=X):X=e[68];let Y;e[69]!==X||e[70]!==n?(Y=X.map(Ce=>{const[se,be]=Ce,ke=n>0?(be/n*100).toFixed(1):"0.0",we=Ge[se]??`Nhóm ${se}`,Be=se==="B"?"destructive":"secondary";return t.jsxs(te,{children:[t.jsxs(x,{children:[t.jsx(Oe,{variant:Be,children:se}),t.jsx("div",{className:"mt-1 text-xs text-muted-foreground",children:we})]}),t.jsx(x,{children:be}),t.jsxs(x,{children:[ke,"%"]})]},se)}),e[69]=X,e[70]=n,e[71]=Y):Y=e[71];let Z;e[72]!==c?(Z=Object.keys(c??{}).length===0&&t.jsx(te,{children:t.jsx(x,{colSpan:3,className:"py-6 text-center text-sm text-muted-foreground",children:"Chưa có dữ liệu. Hãy chạy seeder để khởi tạo AccessLog."})}),e[72]=c,e[73]=Z):Z=e[73],e[74]!==Y||e[75]!==Z?(d=t.jsxs(p,{children:[ue,t.jsx(g,{children:t.jsxs(Ne,{children:[pe,t.jsxs(Te,{children:[Y,Z]})]})})]}),e[74]=Y,e[75]=Z,e[76]=d):d=e[76],v=p,e[77]===Symbol.for("react.memo_cache_sentinel")?(o=t.jsxs(j,{children:[t.jsx(u,{children:"Lượt theo ngày"}),t.jsx(_e,{children:"So sánh số lượt phát hiện vi phạm và hợp lệ trong 7 ngày gần nhất."})]}),e[77]=o):o=e[77],b=g,y=Ne,e[78]===Symbol.for("react.memo_cache_sentinel")?(a=t.jsx(ve,{children:t.jsxs(te,{children:[t.jsx(ee,{children:"Ngày"}),t.jsx(ee,{children:"Hợp lệ"}),t.jsx(ee,{children:"Vi phạm"})]})}),e[78]=a):a=e[78],_=Te,T=f.map(Pe),e[2]=ge,e[3]=s.accuracy,e[4]=s.average_processing_time,e[5]=s.precision,e[6]=s.recall,e[7]=n,e[8]=c,e[9]=_,e[10]=y,e[11]=b,e[12]=v,e[13]=N,e[14]=f,e[15]=r,e[16]=T,e[17]=a,e[18]=o,e[19]=S,e[20]=d,e[21]=C,e[22]=m,e[23]=h}else _=e[9],y=e[10],b=e[11],v=e[12],N=e[13],f=e[14],r=e[15],T=e[16],a=e[17],o=e[18],S=e[19],d=e[20],C=e[21],m=e[22],h=e[23];let k;e[79]!==f.length?(k=f.length===0&&t.jsx(te,{children:t.jsx(x,{colSpan:3,className:"py-6 text-center text-sm text-muted-foreground",children:"Chưa có dữ liệu trong 7 ngày gần nhất."})}),e[79]=f.length,e[80]=k):k=e[80];let w;e[81]!==_||e[82]!==k||e[83]!==T?(w=t.jsxs(_,{children:[T,k]}),e[81]=_,e[82]=k,e[83]=T,e[84]=w):w=e[84];let B;e[85]!==y||e[86]!==w||e[87]!==a?(B=t.jsxs(y,{children:[a,w]}),e[85]=y,e[86]=w,e[87]=a,e[88]=B):B=e[88];let A;e[89]!==b||e[90]!==B?(A=t.jsx(b,{children:B}),e[89]=b,e[90]=B,e[91]=A):A=e[91];let L;e[92]!==v||e[93]!==A||e[94]!==o?(L=t.jsxs(v,{children:[o,A]}),e[92]=v,e[93]=A,e[94]=o,e[95]=L):L=e[95];let H;e[96]!==L||e[97]!==S||e[98]!==d?(H=t.jsxs("div",{className:S,children:[d,L]}),e[96]=L,e[97]=S,e[98]=d,e[99]=H):H=e[99];let ie;e[100]===Symbol.for("react.memo_cache_sentinel")?(ie=t.jsxs(j,{children:[t.jsx(u,{children:"Tổng quan hệ thống"}),t.jsx(_e,{children:"Đếm tổng học sinh, thẻ đang hoạt động và phân bổ kết quả quẹt thẻ."})]}),e[100]=ie):ie=e[100];let ce;e[101]===Symbol.for("react.memo_cache_sentinel")?(ce=t.jsx("div",{className:"text-sm text-muted-foreground",children:"Tổng học sinh"}),e[101]=ce):ce=e[101];let q;e[102]!==l.total_students?(q=t.jsxs("div",{children:[ce,t.jsx("div",{className:"text-2xl font-semibold",children:l.total_students})]}),e[102]=l.total_students,e[103]=q):q=e[103];let ne;e[104]===Symbol.for("react.memo_cache_sentinel")?(ne=t.jsx("div",{className:"text-sm text-muted-foreground",children:"Thẻ đang hoạt động"}),e[104]=ne):ne=e[104];let $;e[105]!==l.active_cards?($=t.jsxs("div",{children:[ne,t.jsx("div",{className:"text-2xl font-semibold",children:l.active_cards})]}),e[105]=l.active_cards,e[106]=$):$=e[106];let re;e[107]===Symbol.for("react.memo_cache_sentinel")?(re=t.jsx("div",{className:"text-sm text-muted-foreground",children:"Lượt hợp lệ / vi phạm"}),e[107]=re):re=e[107];let O;e[108]!==l.valid_total||e[109]!==l.violations_total?(O=t.jsxs("div",{children:[re,t.jsxs("div",{className:"text-2xl font-semibold",children:[l.valid_total," / ",l.violations_total]})]}),e[108]=l.valid_total,e[109]=l.violations_total,e[110]=O):O=e[110];let R;e[111]!==q||e[112]!==$||e[113]!==O?(R=t.jsxs(p,{children:[ie,t.jsxs(g,{className:"grid gap-4 md:grid-cols-3",children:[q,$,O]})]}),e[111]=q,e[112]=$,e[113]=O,e[114]=R):R=e[114];let D;e[115]!==H||e[116]!==R||e[117]!==C||e[118]!==m||e[119]!==h?(D=t.jsxs("div",{className:C,children:[m,h,H,R]}),e[115]=H,e[116]=R,e[117]=C,e[118]=m,e[119]=h,e[120]=D):D=e[120];let ae;return e[121]!==N||e[122]!==r||e[123]!==D?(ae=t.jsxs(N,{children:[r,D]}),e[121]=N,e[122]=r,e[123]=D,e[124]=ae):ae=e[124],ae}function Pe(i){const[e,l]=i;return t.jsxs(te,{children:[t.jsx(x,{className:"whitespace-nowrap",children:new Date(e).toLocaleDateString("vi-VN")}),t.jsx(x,{children:l.valid}),t.jsx(x,{children:l.violations})]},e)}function Ve(i,e){const[l]=i,[s]=e;return l.localeCompare(s)}function Ie(i,e){return i+e}export{et as default};
