import{c as M,j as s,H as P,L as J}from"./app-BP-kkndS.js";import{G as O,T as W,A as X,k as Y,l as Z}from"./app-layout-CNhZyOBO.js";import{B as S}from"./badge-C_8t6gmw.js";import{C as y,a as w,c as C,d as T,b as ee}from"./card-hj9cbVLd.js";import{T as I,a as r,b as se,c as N,d as te,e as le}from"./table-BHtj0bYs.js";import{U as ae}from"./users-BvVghMAW.js";/* empty css            */import"./app-logo-icon-Dv4I51CV.js";import"./index-BekxUu-N.js";import"./index-K6_uAD2S.js";const K=t=>t.replace(/&laquo;/g,"«").replace(/&raquo;/g,"»").replace(/&nbsp;/g," "),ne=t=>t?new Date(t).toLocaleString("vi-VN"):"—",ie={A:"Nhóm A • ≥16 tuổi • Có biển số • Hợp lệ",B:"Nhóm B • <16 tuổi • Có biển số • Vi phạm",C:"Nhóm C • <16 tuổi • Không biển số • Hợp lệ"};function be(t){const e=M.c(56),{students:a,summary:l}=t;let H;e[0]!==a?(H=Array.isArray(a?.data)?a.data:[],e[0]=a,e[1]=H):H=e[1];const n=H;let k;e[2]!==a?(k=Array.isArray(a?.links)?a.links:[],e[2]=a,e[3]=k):k=e[3];const A=k,i=a?.meta;let B;e[4]===Symbol.for("react.memo_cache_sentinel")?(B=s.jsx(P,{title:"Quản lý học sinh"}),e[4]=B):B=e[4];let L;e[5]===Symbol.for("react.memo_cache_sentinel")?(L=s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Quản lý học sinh"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Danh sách hồ sơ học sinh, trạng thái quẹt thẻ và phân nhóm theo kịch bản kiểm thử."})]}),e[5]=L):L=e[5];let D;e[6]===Symbol.for("react.memo_cache_sentinel")?(D=s.jsxs(y,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(w,{className:"text-sm font-medium",children:"Tổng học sinh"}),s.jsx(ae,{className:"h-4 w-4 text-muted-foreground"})]}),e[6]=D):D=e[6];let c;e[7]!==l.total_students?(c=s.jsx("div",{className:"text-2xl font-bold",children:l.total_students}),e[7]=l.total_students,e[8]=c):c=e[8];let q;e[9]===Symbol.for("react.memo_cache_sentinel")?(q=s.jsx("p",{className:"text-xs text-muted-foreground",children:"Theo dữ liệu seeder kịch bản 100 học sinh"}),e[9]=q):q=e[9];let o;e[10]!==c?(o=s.jsxs(C,{children:[D,s.jsxs(T,{children:[c,q]})]}),e[10]=c,e[11]=o):o=e[11];let V;e[12]===Symbol.for("react.memo_cache_sentinel")?(V=s.jsx(w,{className:"text-sm font-medium",children:"Lượt vi phạm"}),e[12]=V):V=e[12];let d;e[13]!==l.total_violations?(d=s.jsxs(y,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[V,s.jsx(S,{variant:"destructive",children:l.total_violations})]}),e[13]=l.total_violations,e[14]=d):d=e[14];let $;e[15]===Symbol.for("react.memo_cache_sentinel")?($=s.jsxs(T,{children:[s.jsx("div",{className:"text-2xl font-bold",children:"Nhóm B"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"28/30 lượt phát hiện đúng, 2 lượt bỏ sót"})]}),e[15]=$):$=e[15];let h;e[16]!==d?(h=s.jsxs(C,{children:[d,$]}),e[16]=d,e[17]=h):h=e[17];let R;e[18]===Symbol.for("react.memo_cache_sentinel")?(R=s.jsxs(y,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(w,{className:"text-sm font-medium",children:"Lượt hợp lệ"}),s.jsx(O,{className:"h-4 w-4 text-muted-foreground"})]}),e[18]=R):R=e[18];let m;e[19]!==l.total_valid?(m=s.jsx("div",{className:"text-2xl font-bold",children:l.total_valid}),e[19]=l.total_valid,e[20]=m):m=e[20];let U;e[21]===Symbol.for("react.memo_cache_sentinel")?(U=s.jsx("p",{className:"text-xs text-muted-foreground",children:"Bao gồm toàn bộ nhóm A và C cùng 2 lượt bỏ sót"}),e[21]=U):U=e[21];let x;e[22]!==m?(x=s.jsxs(C,{children:[R,s.jsxs(T,{children:[m,U]})]}),e[22]=m,e[23]=x):x=e[23];let E;e[24]===Symbol.for("react.memo_cache_sentinel")?(E=s.jsxs(y,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(w,{className:"text-sm font-medium",children:"Học sinh chưa đủ 16 tuổi"}),s.jsx(W,{className:"h-4 w-4 text-muted-foreground"})]}),e[24]=E):E=e[24];let f;e[25]!==l.underage_students?(f=s.jsx("div",{className:"text-2xl font-bold",children:l.underage_students}),e[25]=l.underage_students,e[26]=f):f=e[26];let F;e[27]===Symbol.for("react.memo_cache_sentinel")?(F=s.jsx("p",{className:"text-xs text-muted-foreground",children:"Nhóm B và C theo kịch bản kiểm thử"}),e[27]=F):F=e[27];let p;e[28]!==f?(p=s.jsxs(C,{children:[E,s.jsxs(T,{children:[f,F]})]}),e[28]=f,e[29]=p):p=e[29];let j;e[30]!==h||e[31]!==x||e[32]!==p||e[33]!==o?(j=s.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[o,h,x,p]}),e[30]=h,e[31]=x,e[32]=p,e[33]=o,e[34]=j):j=e[34];let G;e[35]===Symbol.for("react.memo_cache_sentinel")?(G=s.jsxs(y,{children:[s.jsx(w,{children:"Danh sách học sinh"}),s.jsx(ee,{children:"Thông tin cơ bản, phân nhóm và kết quả gần nhất."})]}),e[35]=G):G=e[35];let Q;e[36]===Symbol.for("react.memo_cache_sentinel")?(Q=s.jsx(se,{children:s.jsxs(I,{children:[s.jsx(N,{children:"Học sinh"}),s.jsx(N,{children:"Lớp"}),s.jsx(N,{children:"Độ tuổi"}),s.jsx(N,{children:"Nhóm kịch bản"}),s.jsx(N,{children:"Thống kê"}),s.jsx(N,{children:"Lần quẹt gần nhất"})]})}),e[36]=Q):Q=e[36];let u;e[37]!==n?(u=n.map(ce),e[37]=n,e[38]=u):u=e[38];let g;e[39]!==n.length?(g=n.length===0&&s.jsx(I,{children:s.jsx(r,{colSpan:6,className:"py-10 text-center text-sm text-muted-foreground",children:"Chưa có dữ liệu học sinh. Hãy chạy seeder để khởi tạo dữ liệu kiểm thử."})}),e[39]=n.length,e[40]=g):g=e[40];let _;e[41]!==u||e[42]!==g?(_=s.jsxs(te,{children:[Q,s.jsxs(le,{children:[u,g]})]}),e[41]=u,e[42]=g,e[43]=_):_=e[43];let b;e[44]!==n.length||e[45]!==A||e[46]!==i?.current_page||e[47]!==i?.last_page||e[48]!==i?.total?(b=A.length>0&&s.jsxs("div",{className:"mt-4 flex flex-wrap items-center justify-between gap-2 text-sm text-muted-foreground",children:[s.jsxs("div",{children:["Trang ",i?.current_page??1," / ",i?.last_page??1," • Tổng ",i?.total??n.length," học sinh"]}),s.jsx("div",{className:"flex items-center gap-2",children:A.map(re)})]}),e[44]=n.length,e[45]=A,e[46]=i?.current_page,e[47]=i?.last_page,e[48]=i?.total,e[49]=b):b=e[49];let v;e[50]!==_||e[51]!==b?(v=s.jsxs(C,{children:[G,s.jsxs(T,{children:[_,b]})]}),e[50]=_,e[51]=b,e[52]=v):v=e[52];let z;return e[53]!==j||e[54]!==v?(z=s.jsxs(X,{children:[B,s.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4",children:[L,j,v]})]}),e[53]=j,e[54]=v,e[55]=z):z=e[55],z}function re(t,e){return s.jsx("span",{children:t.url?s.jsx(J,{href:t.url,className:`rounded-md px-3 py-1 transition-colors ${t.active?"bg-primary text-primary-foreground shadow":"hover:bg-muted"}`,children:K(t.label)}):s.jsx("span",{className:"rounded-md px-3 py-1 opacity-50",children:K(t.label)})},`${t.label}-${e}`)}function ce(t){const e=t.scenario_group??"—",a=ie[e]??"Chưa được phân nhóm",l=t.full_name.split(/\s+/).filter(Boolean).slice(-2).map(oe).join("")||"HS";return s.jsxs(I,{children:[s.jsx(r,{children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Y,{className:"size-10",children:s.jsx(Z,{children:l})}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("div",{className:"font-semibold leading-none",children:t.full_name}),s.jsxs("div",{className:"text-xs text-muted-foreground",children:["Mã HS: ",t.student_code]}),s.jsxs("div",{className:"text-xs text-muted-foreground",children:["Liên hệ: ",t.contact_phone??"—"," • Phụ huynh: ",t.guardian_phone??"—"]})]})]})}),s.jsx(r,{className:"whitespace-nowrap",children:t.class_name}),s.jsx(r,{children:t.age??"—"}),s.jsxs(r,{children:[s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsx(S,{variant:e==="B"?"destructive":"secondary",children:e}),s.jsx(S,{variant:t.is_underage?"outline":"secondary",children:t.is_underage?"Chưa đủ 16 tuổi":"≥ 16 tuổi"})]}),s.jsx("div",{className:"mt-1 text-xs text-muted-foreground",children:a})]}),s.jsx(r,{children:s.jsxs("div",{className:"space-y-1 text-sm",children:[s.jsxs("div",{children:["Vi phạm: ",t.violations_count]}),s.jsxs("div",{children:["Hợp lệ: ",t.valid_count]})]})}),s.jsx(r,{children:s.jsxs("div",{className:"space-y-1 text-xs text-muted-foreground",children:[s.jsx("div",{children:ne(t.last_activity_at)}),s.jsxs("div",{children:["Trạng thái:"," ",t.last_result==="violation"?s.jsx(S,{variant:"destructive",className:"ml-1",children:"Vi phạm"}):t.last_result==="valid"?s.jsx(S,{variant:"secondary",className:"ml-1",children:"Hợp lệ"}):s.jsx("span",{className:"ml-1",children:"—"})]})]})})]},t.id)}function oe(t){return t.charAt(0).toUpperCase()}export{be as default};
