import{c as at,u as nt,j as t,r as it,H as rt}from"./app-BBylKGur.js";import{A as ct}from"./app-layout-CXZuh_MN.js";import{B as Xe}from"./app-logo-icon-BwHC40vT.js";import{C as Ye,a as Ze,b as et,c as tt,d as st}from"./card-CYO4tml0.js";import{I as o}from"./input-Coe2l5z4.js";import{L as c}from"./label-BLf3dZlc.js";import{S as dt,T as ot,a as ht,b as mt,c as ut,d as lt,e as _t}from"./select-CmIbxsRV.js";import{B as ft}from"./badge-BeWK984R.js";import{A as xt}from"./arrow-left-ByJ9FUzj.js";/* empty css            */import"./index-B4eBERlR.js";import"./index-XTcFbv2T.js";import"./index-ClrBi14j.js";import"./check-BBeFkiA_.js";function Ht(r){const e=at.c(185),{student:l}=r,Ie=l.gender??"",Re=l.contact_phone??"",Ae=l.guardian_name??"",Be=l.guardian_phone??"",Ee=l.notes??"";let he;e[0]!==l.birth_date||e[1]!==l.class_name||e[2]!==l.full_name||e[3]!==l.student_code||e[4]!==Ie||e[5]!==Re||e[6]!==Ae||e[7]!==Be||e[8]!==Ee?(he={student_code:l.student_code,full_name:l.full_name,class_name:l.class_name,gender:Ie,birth_date:l.birth_date,contact_phone:Re,guardian_name:Ae,guardian_phone:Be,notes:Ee},e[0]=l.birth_date,e[1]=l.class_name,e[2]=l.full_name,e[3]=l.student_code,e[4]=Ie,e[5]=Re,e[6]=Ae,e[7]=Be,e[8]=Ee,e[9]=he):he=e[9];const{data:a,setData:n,put:Ve,processing:d,errors:s}=nt(he);let me;e[10]!==Ve||e[11]!==l.id?(me=i=>{i.preventDefault(),Ve(route("students.update",l.id),{preserveScroll:!0})},e[10]=Ve,e[11]=l.id,e[12]=me):me=e[12];const Ge=me;let ue;e[13]!==l.id?(ue=()=>{it.visit(route("students.show",l.id))},e[13]=l.id,e[14]=ue):ue=e[14];const h=ue,Ke=`Chỉnh sửa học sinh - ${l.full_name}`;let m;e[15]!==Ke?(m=t.jsx(rt,{title:Ke}),e[15]=Ke,e[16]=m):m=e[16];let _e;e[17]===Symbol.for("react.memo_cache_sentinel")?(_e=t.jsx(xt,{className:"w-4 h-4"}),e[17]=_e):_e=e[17];let u;e[18]!==h?(u=t.jsx(Xe,{variant:"ghost",size:"icon",onClick:h,children:_e}),e[18]=h,e[19]=u):u=e[19];let fe;e[20]===Symbol.for("react.memo_cache_sentinel")?(fe=t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold",children:"Chỉnh sửa hồ sơ"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Cập nhật thông tin học sinh và theo dõi thẻ được gắn."})]}),e[20]=fe):fe=e[20];let _;e[21]!==u?(_=t.jsxs("div",{className:"flex items-center gap-4",children:[u,fe]}),e[21]=u,e[22]=_):_=e[22];let xe;e[23]===Symbol.for("react.memo_cache_sentinel")?(xe=t.jsxs(Ye,{children:[t.jsx(Ze,{children:"Thông tin học sinh"}),t.jsx(et,{children:"Cập nhật thông tin cơ bản; hệ thống sẽ đồng bộ với module xử lý vi phạm."})]}),e[23]=xe):xe=e[23];let pe;e[24]===Symbol.for("react.memo_cache_sentinel")?(pe=t.jsxs(c,{htmlFor:"student_code",children:["Mã học sinh ",t.jsx("span",{className:"text-red-500",children:"*"})]}),e[24]=pe):pe=e[24];let f;e[25]!==n?(f=i=>n("student_code",i.target.value),e[25]=n,e[26]=f):f=e[26];const $e=s.student_code?"border-red-500":"";let x;e[27]!==a.student_code||e[28]!==f||e[29]!==$e?(x=t.jsx(o,{id:"student_code",value:a.student_code,onChange:f,required:!0,className:$e}),e[27]=a.student_code,e[28]=f,e[29]=$e,e[30]=x):x=e[30];let p;e[31]!==s.student_code?(p=s.student_code&&t.jsx("p",{className:"text-sm text-red-500",children:s.student_code}),e[31]=s.student_code,e[32]=p):p=e[32];let g;e[33]!==x||e[34]!==p?(g=t.jsxs("div",{className:"space-y-2",children:[pe,x,p]}),e[33]=x,e[34]=p,e[35]=g):g=e[35];let ge;e[36]===Symbol.for("react.memo_cache_sentinel")?(ge=t.jsxs(c,{htmlFor:"full_name",children:["Họ và tên ",t.jsx("span",{className:"text-red-500",children:"*"})]}),e[36]=ge):ge=e[36];let j;e[37]!==n?(j=i=>n("full_name",i.target.value),e[37]=n,e[38]=j):j=e[38];const ze=s.full_name?"border-red-500":"";let b;e[39]!==a.full_name||e[40]!==j||e[41]!==ze?(b=t.jsx(o,{id:"full_name",value:a.full_name,onChange:j,required:!0,className:ze}),e[39]=a.full_name,e[40]=j,e[41]=ze,e[42]=b):b=e[42];let v;e[43]!==s.full_name?(v=s.full_name&&t.jsx("p",{className:"text-sm text-red-500",children:s.full_name}),e[43]=s.full_name,e[44]=v):v=e[44];let N;e[45]!==b||e[46]!==v?(N=t.jsxs("div",{className:"space-y-2",children:[ge,b,v]}),e[45]=b,e[46]=v,e[47]=N):N=e[47];let y;e[48]!==g||e[49]!==N?(y=t.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[g,N]}),e[48]=g,e[49]=N,e[50]=y):y=e[50];let je;e[51]===Symbol.for("react.memo_cache_sentinel")?(je=t.jsxs(c,{htmlFor:"class_name",children:["Lớp ",t.jsx("span",{className:"text-red-500",children:"*"})]}),e[51]=je):je=e[51];let S;e[52]!==n?(S=i=>n("class_name",i.target.value),e[52]=n,e[53]=S):S=e[53];const Me=s.class_name?"border-red-500":"";let C;e[54]!==a.class_name||e[55]!==S||e[56]!==Me?(C=t.jsx(o,{id:"class_name",value:a.class_name,onChange:S,required:!0,className:Me}),e[54]=a.class_name,e[55]=S,e[56]=Me,e[57]=C):C=e[57];let F;e[58]!==s.class_name?(F=s.class_name&&t.jsx("p",{className:"text-sm text-red-500",children:s.class_name}),e[58]=s.class_name,e[59]=F):F=e[59];let w;e[60]!==C||e[61]!==F?(w=t.jsxs("div",{className:"space-y-2",children:[je,C,F]}),e[60]=C,e[61]=F,e[62]=w):w=e[62];let be;e[63]===Symbol.for("react.memo_cache_sentinel")?(be=t.jsx(c,{children:"Giới tính"}),e[63]=be):be=e[63];let L;e[64]!==n?(L=i=>n("gender",i),e[64]=n,e[65]=L):L=e[65];let ve;e[66]===Symbol.for("react.memo_cache_sentinel")?(ve=t.jsx(ht,{children:t.jsx(mt,{placeholder:"Chọn giới tính"})}),e[66]=ve):ve=e[66];let Ne;e[67]===Symbol.for("react.memo_cache_sentinel")?(Ne=t.jsxs(ut,{children:[t.jsx(lt,{value:"male",children:"Nam"}),t.jsx(lt,{value:"female",children:"Nữ"}),t.jsx(lt,{value:"other",children:"Khác"})]}),e[67]=Ne):Ne=e[67];let T;e[68]!==a.gender||e[69]!==L?(T=t.jsxs(dt,{value:a.gender,onValueChange:L,children:[ve,Ne]}),e[68]=a.gender,e[69]=L,e[70]=T):T=e[70];let q;e[71]!==s.gender?(q=s.gender&&t.jsx("p",{className:"text-sm text-red-500",children:s.gender}),e[71]=s.gender,e[72]=q):q=e[72];let D;e[73]!==T||e[74]!==q?(D=t.jsxs("div",{className:"space-y-2",children:[be,T,q]}),e[73]=T,e[74]=q,e[75]=D):D=e[75];let ye;e[76]===Symbol.for("react.memo_cache_sentinel")?(ye=t.jsxs(c,{htmlFor:"birth_date",children:["Ngày sinh ",t.jsx("span",{className:"text-red-500",children:"*"})]}),e[76]=ye):ye=e[76];let H;e[77]!==n?(H=i=>n("birth_date",i.target.value),e[77]=n,e[78]=H):H=e[78];const Qe=s.birth_date?"border-red-500":"";let k;e[79]!==a.birth_date||e[80]!==H||e[81]!==Qe?(k=t.jsx(o,{id:"birth_date",type:"date",value:a.birth_date,onChange:H,required:!0,className:Qe}),e[79]=a.birth_date,e[80]=H,e[81]=Qe,e[82]=k):k=e[82];let I;e[83]!==s.birth_date?(I=s.birth_date&&t.jsx("p",{className:"text-sm text-red-500",children:s.birth_date}),e[83]=s.birth_date,e[84]=I):I=e[84];let R;e[85]!==k||e[86]!==I?(R=t.jsxs("div",{className:"space-y-2",children:[ye,k,I]}),e[85]=k,e[86]=I,e[87]=R):R=e[87];let A;e[88]!==w||e[89]!==D||e[90]!==R?(A=t.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[w,D,R]}),e[88]=w,e[89]=D,e[90]=R,e[91]=A):A=e[91];let Se;e[92]===Symbol.for("react.memo_cache_sentinel")?(Se=t.jsx(c,{htmlFor:"contact_phone",children:"Số điện thoại học sinh"}),e[92]=Se):Se=e[92];let B;e[93]!==n?(B=i=>n("contact_phone",i.target.value),e[93]=n,e[94]=B):B=e[94];const Je=s.contact_phone?"border-red-500":"";let E;e[95]!==a.contact_phone||e[96]!==B||e[97]!==Je?(E=t.jsx(o,{id:"contact_phone",value:a.contact_phone,onChange:B,className:Je}),e[95]=a.contact_phone,e[96]=B,e[97]=Je,e[98]=E):E=e[98];let V;e[99]!==s.contact_phone?(V=s.contact_phone&&t.jsx("p",{className:"text-sm text-red-500",children:s.contact_phone}),e[99]=s.contact_phone,e[100]=V):V=e[100];let G;e[101]!==E||e[102]!==V?(G=t.jsxs("div",{className:"space-y-2",children:[Se,E,V]}),e[101]=E,e[102]=V,e[103]=G):G=e[103];let Ce;e[104]===Symbol.for("react.memo_cache_sentinel")?(Ce=t.jsx(c,{htmlFor:"guardian_phone",children:"Số điện thoại phụ huynh"}),e[104]=Ce):Ce=e[104];let K;e[105]!==n?(K=i=>n("guardian_phone",i.target.value),e[105]=n,e[106]=K):K=e[106];const Oe=s.guardian_phone?"border-red-500":"";let $;e[107]!==a.guardian_phone||e[108]!==K||e[109]!==Oe?($=t.jsx(o,{id:"guardian_phone",value:a.guardian_phone,onChange:K,className:Oe}),e[107]=a.guardian_phone,e[108]=K,e[109]=Oe,e[110]=$):$=e[110];let z;e[111]!==s.guardian_phone?(z=s.guardian_phone&&t.jsx("p",{className:"text-sm text-red-500",children:s.guardian_phone}),e[111]=s.guardian_phone,e[112]=z):z=e[112];let M;e[113]!==$||e[114]!==z?(M=t.jsxs("div",{className:"space-y-2",children:[Ce,$,z]}),e[113]=$,e[114]=z,e[115]=M):M=e[115];let Q;e[116]!==G||e[117]!==M?(Q=t.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[G,M]}),e[116]=G,e[117]=M,e[118]=Q):Q=e[118];let Fe;e[119]===Symbol.for("react.memo_cache_sentinel")?(Fe=t.jsx(c,{htmlFor:"guardian_name",children:"Tên phụ huynh"}),e[119]=Fe):Fe=e[119];let J;e[120]!==n?(J=i=>n("guardian_name",i.target.value),e[120]=n,e[121]=J):J=e[121];const Pe=s.guardian_name?"border-red-500":"";let O;e[122]!==a.guardian_name||e[123]!==J||e[124]!==Pe?(O=t.jsx(o,{id:"guardian_name",value:a.guardian_name,onChange:J,className:Pe}),e[122]=a.guardian_name,e[123]=J,e[124]=Pe,e[125]=O):O=e[125];let P;e[126]!==s.guardian_name?(P=s.guardian_name&&t.jsx("p",{className:"text-sm text-red-500",children:s.guardian_name}),e[126]=s.guardian_name,e[127]=P):P=e[127];let U;e[128]!==O||e[129]!==P?(U=t.jsxs("div",{className:"space-y-2",children:[Fe,O,P]}),e[128]=O,e[129]=P,e[130]=U):U=e[130];let we;e[131]===Symbol.for("react.memo_cache_sentinel")?(we=t.jsx(c,{htmlFor:"notes",children:"Ghi chú"}),e[131]=we):we=e[131];let W;e[132]!==n?(W=i=>n("notes",i.target.value),e[132]=n,e[133]=W):W=e[133];const Ue=s.notes?"border-red-500":"";let X;e[134]!==a.notes||e[135]!==W||e[136]!==Ue?(X=t.jsx(ot,{id:"notes",value:a.notes,onChange:W,rows:4,className:Ue}),e[134]=a.notes,e[135]=W,e[136]=Ue,e[137]=X):X=e[137];let Y;e[138]!==s.notes?(Y=s.notes&&t.jsx("p",{className:"text-sm text-red-500",children:s.notes}),e[138]=s.notes,e[139]=Y):Y=e[139];let Z;e[140]!==X||e[141]!==Y?(Z=t.jsxs("div",{className:"space-y-2",children:[we,X,Y]}),e[140]=X,e[141]=Y,e[142]=Z):Z=e[142];let ee;e[143]!==y||e[144]!==A||e[145]!==Q||e[146]!==U||e[147]!==Z?(ee=t.jsxs(tt,{className:"space-y-6",children:[xe,t.jsxs(st,{className:"space-y-5",children:[y,A,Q,U,Z]})]}),e[143]=y,e[144]=A,e[145]=Q,e[146]=U,e[147]=Z,e[148]=ee):ee=e[148];let Le;e[149]===Symbol.for("react.memo_cache_sentinel")?(Le=t.jsxs(Ye,{children:[t.jsx(Ze,{children:"Thẻ đã gán"}),t.jsx(et,{children:"Hệ thống sử dụng thẻ này để nhận diện khi học sinh quẹt tại nhà xe."})]}),e[149]=Le):Le=e[149];let te;e[150]!==l.cards?(te=l.cards.length===0?t.jsx("p",{className:"text-sm text-muted-foreground",children:"Chưa có thẻ nào. Hãy gán thẻ cho học sinh trong mục quản lý thẻ."}):l.cards.map(pt),e[150]=l.cards,e[151]=te):te=e[151];let se;e[152]!==te?(se=t.jsxs(tt,{children:[Le,t.jsx(st,{className:"space-y-3",children:te})]}),e[152]=te,e[153]=se):se=e[153];let Te;e[154]===Symbol.for("react.memo_cache_sentinel")?(Te=t.jsxs(Ye,{children:[t.jsx(Ze,{children:"Thống kê vi phạm"}),t.jsx(et,{children:"Tổng số lần hệ thống ghi nhận học sinh sử dụng xe không phù hợp."})]}),e[154]=Te):Te=e[154];let qe;e[155]===Symbol.for("react.memo_cache_sentinel")?(qe=t.jsx("span",{children:"Lượt vi phạm"}),e[155]=qe):qe=e[155];let le;e[156]!==l.violation_count?(le=t.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-border/60 bg-muted/30 p-3",children:[qe,t.jsx("span",{className:"text-lg font-semibold text-destructive",children:l.violation_count})]}),e[156]=l.violation_count,e[157]=le):le=e[157];let De;e[158]===Symbol.for("react.memo_cache_sentinel")?(De=t.jsx("p",{children:"Khi vượt quá 3 lượt vi phạm/tháng, hệ thống sẽ đề xuất gửi thông báo tới phụ huynh và giáo viên chủ nhiệm."}),e[158]=De):De=e[158];let ae;e[159]!==le?(ae=t.jsxs(tt,{children:[Te,t.jsxs(st,{className:"space-y-2 text-sm text-muted-foreground",children:[le,De]})]}),e[159]=le,e[160]=ae):ae=e[160];let ne;e[161]!==h||e[162]!==d?(ne=t.jsx(Xe,{type:"button",variant:"outline",onClick:h,disabled:d,children:"Hủy"}),e[161]=h,e[162]=d,e[163]=ne):ne=e[163];let He;e[164]===Symbol.for("react.memo_cache_sentinel")?(He=t.jsx(_t,{className:"w-4 h-4"}),e[164]=He):He=e[164];const We=d?"Đang lưu...":"Lưu thay đổi";let ie;e[165]!==d||e[166]!==We?(ie=t.jsxs(Xe,{type:"submit",disabled:d,className:"gap-2",children:[He,We]}),e[165]=d,e[166]=We,e[167]=ie):ie=e[167];let re;e[168]!==ne||e[169]!==ie?(re=t.jsxs("div",{className:"flex justify-end gap-2",children:[ne,ie]}),e[168]=ne,e[169]=ie,e[170]=re):re=e[170];let ce;e[171]!==se||e[172]!==ae||e[173]!==re?(ce=t.jsxs("div",{className:"grid gap-4",children:[se,ae,re]}),e[171]=se,e[172]=ae,e[173]=re,e[174]=ce):ce=e[174];let de;e[175]!==Ge||e[176]!==ee||e[177]!==ce?(de=t.jsxs("form",{onSubmit:Ge,className:"grid gap-4 xl:grid-cols-[2fr_1fr]",children:[ee,ce]}),e[175]=Ge,e[176]=ee,e[177]=ce,e[178]=de):de=e[178];let oe;e[179]!==_||e[180]!==de?(oe=t.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4",children:[_,de]}),e[179]=_,e[180]=de,e[181]=oe):oe=e[181];let ke;return e[182]!==m||e[183]!==oe?(ke=t.jsxs(ct,{children:[m,oe]}),e[182]=m,e[183]=oe,e[184]=ke):ke=e[184],ke}function pt(r){return t.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-border/60 bg-muted/30 p-3",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-medium",children:r.card_code}),t.jsxs("p",{className:"text-xs text-muted-foreground",children:["Loại: ",r.card_type==="RFID"?"RFID":"QR code"]}),t.jsxs("p",{className:"text-xs text-muted-foreground",children:["Cấp: ",r.issued_at?new Date(r.issued_at).toLocaleDateString("vi-VN"):"Chưa rõ"]})]}),t.jsx(ft,{variant:r.is_active?"secondary":"outline",children:r.is_active?"Đang hoạt động":"Đã vô hiệu"})]},r.id)}export{Ht as default};
